<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Letterboxd</title>
        <link rel="icon" type="image/png" href="/assets/favicons/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/assets/favicons/favicon.svg" />
        <link rel="shortcut icon" href="/assets/favicons/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" />
        <link rel="manifest" href="/assets/favicons/site.webmanifest" />

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css">
    </head>
    <body>
        <div class="container text-center">
            <div class="row">
                <div class="col">
                    <h1 href="/" class="display-4"><a class="link-dark link-underline link-underline-opacity-0" href="/">â—Œ</a></h1>
                    <hr class="mt-0 border-3">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <ul class="nav nav-pills justify-content-center mb-2" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-feed-tab" data-bs-toggle="pill" data-bs-target="#feed-panel" type="button" role="tab" aria-controls="feed-panel" aria-selected="true">Feed</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-summary-tab" data-bs-toggle="pill" data-bs-target="#summary-panel" type="button" role="tab" aria-controls="summary-panel" aria-selected="false">Summary</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-map-tab" data-bs-toggle="pill" data-bs-target="#map-panel" type="button" role="tab" aria-controls="map-panel" aria-selected="false">Map</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-network-tab" data-bs-toggle="pill" data-bs-target="#network-panel" type="button" role="tab" aria-controls="network-panel" aria-selected="false">Network</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show" id="feed-panel" role="tabpanel" aria-labelledby="pills-feed-tab" tabindex="0">
                            <div class="row justify-content-center p-3">
                                <div class="col-sm-4">
                                    <input id="feedInput" type="text" class="form-control" placeholder="Username" aria-label="Username">
                                </div>
                                <div class="col-sm-auto">
                                    <button id="feedButton" type="submit" class="btn btn-primary">
                                        Update
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <h2 class="mb-0" id="feedTitle">Last Four Watched*</h2>
                                <p class="mt-0"><small>*Diary Entries</small></p>
                            </div>
                            <div id="feedContainer" class="row justify-content-center"></div>
                        </div>
                        <div class="tab-pane fade" id="summary-panel" role="tabpanel" aria-labelledby="pills-summary-tab" tabindex="0">
                            <div class="row">
                                <p><small>Data from TMDB and Letterboxd (as of 2025-03-11)</small></p>
                            </div>
                            <div class="row justify-content-center pb-3">
                                <div class="col-md-auto">
                                    <select id="histSelect" class="form-select" aria-label="Select Grouping">
                                        <option selected>Rating</option>
                                        <option>Decade</option>
                                        <option>Runtime</option>
                                    </select>
                                </div>
                                <div id="histContainer" class="col-md-7"></div>
                            </div>
                            <div class="row justify-content-center pt-2 pb-3">
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="row g-0">
                                            <div class="col-md-4">
                                                <div class="list-group list-group-flush">
                                                    <button class="list-group-item list-group-item-action active" data-bs-toggle="list" aria-current="true">Directors</button>
                                                    <button class="list-group-item list-group-item-action" data-bs-toggle="list">Cinematographers</button>
                                                    <button class="list-group-item list-group-item-action" data-bs-toggle="list">Composers</button>
                                                    <button class="list-group-item list-group-item-action" data-bs-toggle="list">Writers</button>
                                                    <button class="list-group-item list-group-item-action" data-bs-toggle="list">Editors</button>
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <div id="carouselTopList" class="carousel slide" data-bs-theme="dark" style="height: 100%;">
                                                    <div class="carousel-inner">
                                                      <div id="carouselFirst" class="carousel-item active">
                                                        <img src="../assets/default_person.png" class="d-block w-50" style="margin: auto;">
                                                        <h5></h5>
                                                        <p></p>
                                                      </div>
                                                      <div id="carouselSecond" class="carousel-item">
                                                        <img src="../assets/default_person.png" class="d-block w-50" style="margin: auto;">
                                                        <h5></h5>
                                                        <p></p>
                                                      </div>
                                                      <div id="carouselThird" class="carousel-item">
                                                        <img src="../assets/default_person.png" class="d-block w-50" style="margin: auto;">
                                                        <h5></h5>
                                                        <p></p>
                                                      </div>
                                                    </div>
                                                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselTopList" data-bs-slide="prev">
                                                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                      <span class="visually-hidden">Previous</span>
                                                    </button>
                                                    <button class="carousel-control-next" type="button" data-bs-target="#carouselTopList" data-bs-slide="next">
                                                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                      <span class="visually-hidden">Next</span>
                                                    </button>
                                                  </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <h4 class="card-title">Spoken Languages</h4>
                                        <div class="row justify-content-center">
                                            <div id="pieContainer" class="col-md-7"></div>
                                        </div>
                                        <div class="row justify-content-center">
                                            <p id="languageDetail"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="map-panel" role="tabpanel" aria-labelledby="pills-map-tab" tabindex="0">
                            <div class="row justify-content-center">
                                <h4>Movies by Countries of Production</h4>
                            </div>
                            <div class="row justify-content-center">
                                <div id="mapContainer" class="col"></div>
                                <p id="mapDetail"></p>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="network-panel" role="tabpanel" aria-labelledby="pills-network-tab" tabindex="0">
                            <div class="row justify-content-center">
                                <h4>Actor Network</h4>
                                <p><small>Based on each movies top 5 actors</small></p>
                            </div>
                            <div class="row justify-content-center">
                                <div id="networkContainer" class="col"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="toast-container bottom-0 start-50 translate-middle-x p-3">
            <div id="feedErrorToast" class="toast text-bg-danger" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">
                        Error getting Letterboxd feed.
                    </div>
                    <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="close"></button>
                </div>
            </div>
        </div>

        <template id="feedTemplate">
            <div class="card mb-2">
                <div class="row g-0">
                    <div class="col-md-auto p-2 d-flex align-items-center justify-content-center">
                        <img src="" style="max-height: 150px; width: auto;">
                    </div>
                    <div class="col-md-9">
                        <div class="card-body text-start">
                            <h5 class="card-title"><a class="link-dark" href="#"></a></h5>
                            <p id="cardReview" class="card-text"></p>
                            <p class="card-text"><small class="text-body-secondary"></small></p>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
        <script src="letterboxd.js"></script>          
    </body>
</html>